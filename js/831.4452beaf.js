"use strict";(self["webpackChunkimooc_admin"]=self["webpackChunkimooc_admin"]||[]).push([[831],{1033:function(e,l,t){t.d(l,{L:function(){return o}});var a=t(4471);const o=()=>(0,a.Z)({url:"/permission/list"})},730:function(e,l,t){t.d(l,{Uy:function(){return o},b6:function(){return r},hg:function(){return n}});var a=t(4471);const o=()=>(0,a.Z)({url:"/role/list"}),r=e=>(0,a.Z)({url:`/role/permission/${e}`}),n=e=>(0,a.Z)({url:"/role/distribute-permission",method:"POST",data:e})},1831:function(e,l,t){t.r(l),t.d(l,{default:function(){return g}});var a=t(6252),o=t(3577),r=t(2262),n=t(730),i=t(3188),u=t(1033),s=t(610),d=t(9150);const c={class:"dialog-footer"};var m={props:{modelValue:{type:Boolean,required:!0},roleId:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=e,m=(0,d.QT)(),p=async()=>{await(0,n.hg)({roleId:t.roleId,permissions:g.value.getCheckedKeys()}),s.z8.success(m.t("msg.role.updateRoleSuccess")),w()},w=()=>{l("update:modelValue",!1)},f=(0,r.iH)([]),v=async()=>{f.value=await(0,u.L)()};v(),(0,i.K)(v);const b={children:"children",label:"permissionName"},g=(0,r.iH)(null),y=async()=>{const e=await(0,n.b6)(t.roleId);g.value.setCheckedKeys(e)};return(0,a.YP)((()=>t.roleId),(e=>{e&&y()})),(l,t)=>{const r=(0,a.up)("el-tree"),n=(0,a.up)("el-button"),i=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(i,{title:l.$t("msg.excel.roleDialogTitle"),"model-value":e.modelValue,onClose:w},{footer:(0,a.w5)((()=>[(0,a._)("span",c,[(0,a.Wm)(n,{onClick:w},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(l.$t("msg.universal.cancel")),1)])),_:1}),(0,a.Wm)(n,{type:"primary",onClick:p},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(l.$t("msg.universal.confirm")),1)])),_:1})])])),default:(0,a.w5)((()=>[(0,a.Wm)(r,{ref_key:"treeRef",ref:g,data:f.value,"show-checkbox":"","check-strictly":"","node-key":"id","default-expand-all":"",props:b},null,8,["data"])])),_:1},8,["title","model-value"])}}};const p=m;var w=p;const f={class:""};var v={setup(e){const l=(0,r.iH)([]),t=async()=>{l.value=await(0,n.Uy)()};t(),(0,i.K)(t());const u=(0,r.iH)(!1),s=(0,r.iH)(""),d=e=>{u.value=!0,s.value=e.id};return(e,t)=>{const n=(0,a.up)("el-table-column"),i=(0,a.up)("el-button"),c=(0,a.up)("el-table"),m=(0,a.up)("el-card"),p=(0,a.Q2)("permission");return(0,a.wg)(),(0,a.iD)("div",f,[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{data:l.value,border:"",style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{label:e.$t("msg.role.index"),type:"index",width:"120"},null,8,["label"]),(0,a.Wm)(n,{label:e.$t("msg.role.name"),prop:"title"},null,8,["label"]),(0,a.Wm)(n,{label:e.$t("msg.role.desc"),prop:"describe"},null,8,["label"]),(0,a.Wm)(n,{label:e.$t("msg.role.action"),prop:"action",width:"260"},{default:(0,a.w5)((({row:l})=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(i,{type:"primary",size:"mini",onClick:e=>d(l)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.$t("msg.role.assignPermissions")),1)])),_:2},1032,["onClick"])),[[p,["distributePermission"]]])])),_:1},8,["label"])])),_:1},8,["data"])])),_:1}),(0,a.Wm)((0,r.SU)(w),{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),roleId:s.value},null,8,["modelValue","roleId"])])}}};const b=v;var g=b}}]);
//# sourceMappingURL=831.4452beaf.js.map